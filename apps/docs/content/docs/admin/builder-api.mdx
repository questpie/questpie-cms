---
title: Admin Builder API
description: Complete reference for the qa() builder pattern
---

# Admin Builder API

The `qa()` builder is the entry point for configuring your admin interface. It provides a fluent, type-safe API for defining collections, globals, navigation, and more.

## Creating an Admin Builder

```typescript
import { qa, adminModule } from "@questpie/admin/client";
import type { AppCMS } from "./server/cms";

const admin = qa<AppCMS>()
  .use(adminModule)
  .branding({ name: "My Admin" })
  .collections({ posts: postsAdmin })
  .globals({ settings: settingsAdmin })
  .sidebar(sidebarConfig)
  .dashboard(dashboardConfig)
  .locale({ default: "en", supported: ["en", "sk"] })
  .messages(customMessages);
```

<Callout type="info">
The generic `<AppCMS>` provides type inference for your backend collections, globals, and other definitions.
</Callout>

## Builder Methods

### `.use(module)`

Merge another admin builder or module into this one:

```typescript
import { adminModule } from "@questpie/admin/client";

const admin = qa()
  .use(adminModule)        // Built-in fields, views, widgets
  .use(myCustomModule);    // Your custom extensions
```

The merge strategy:
- **fields** - Spread (last wins on conflicts)
- **views** - Spread (last wins on conflicts)
- **widgets** - Spread (last wins on conflicts)
- **sidebar** - Sections concatenated
- **translations** - Deep merged

### `.branding(config)`

Configure admin branding:

```typescript
.branding({
  name: "My CMS",              // Shown in sidebar
  logo: LogoComponent,         // React component
  favicon: "/favicon.ico",     // Optional
})
```

### `.collections(config)`

Register collection UI configurations:

```typescript
.collections({
  posts: postsAdmin,
  users: usersAdmin,
  pages: pagesAdmin,
})
```

Each value must be a collection admin configuration created with `builder.collection()`.

### `.globals(config)`

Register global UI configurations:

```typescript
.globals({
  siteSettings: settingsAdmin,
  navigation: navAdmin,
})
```

### `.sidebar(config)`

Configure navigation structure:

```typescript
.sidebar(
  qa.sidebar<AppCMS>()
    .section("main", (s) => s.items([...]))
    .section("content", (s) => s.title("Content").items([...]))
)
```

See [Sidebar Configuration](/docs/admin/sidebar) for details.

### `.dashboard(config)`

Configure dashboard widgets:

```typescript
.dashboard({
  title: "Dashboard",
  columns: 4,
  items: [
    { type: "stats", collection: "posts", label: "Posts" },
    { type: "chart", collection: "posts", field: "createdAt" },
  ],
})
```

See [Dashboard Configuration](/docs/admin/dashboard) for details.

### `.blocks(config)`

Register page builder blocks:

```typescript
import blocks from "./blocks";

.blocks(blocks)
```

See [Block System](/docs/admin/blocks) for details.

### `.locale(config)`

Configure admin UI localization:

```typescript
.locale({
  default: "en",
  supported: ["en", "sk", "de"],
})
```

### `.messages(translations)`

Add custom translation messages:

```typescript
.messages({
  en: {
    "custom.greeting": "Hello!",
    "collection.posts.title": "Blog Posts",
  },
  sk: {
    "custom.greeting": "Ahoj!",
    "collection.posts.title": "Blogove prispevky",
  },
})
```

### `.fields(registry)`

Register custom field types:

```typescript
.fields({
  colorPicker: myColorPickerField,
  markdown: myMarkdownField,
})
```

### `.views(registry)`

Register custom view types:

```typescript
.views({
  kanban: myKanbanView,
  calendar: myCalendarView,
})
```

### `.widgets(registry)`

Register custom dashboard widgets:

```typescript
.widgets({
  weather: myWeatherWidget,
  notifications: myNotificationsWidget,
})
```

## Why No `.build()` Method?

Unlike the backend `q()` builder, the admin `qa()` builder does NOT have a `.build()` method. This is intentional:

| Backend (`q`) | Admin (`qa`) |
|---------------|--------------|
| Creates runtime instances | Pure configuration |
| Generates Drizzle tables | Defines React components |
| Executes complex logic | State IS the config |
| Must call `.build()` | NO `.build()` needed |

```typescript
// Backend - .build() creates runtime
const cms = q().collections({...}).build({ db: {...} });
cms.collections.posts.table;  // Drizzle table instance

// Admin - state IS the config
const admin = qa().collections({...});
admin.state.collections.posts;  // Configuration object
```

The admin builder's internal state is accessed directly by React components at runtime.

## Accessing Builder State

You can access the configuration state directly:

```typescript
const admin = qa()
  .use(adminModule)
  .collections({ posts: postsAdmin });

// Access state
admin.state.collections.posts;    // PostsAdmin config
admin.state.fields;               // Registered fields
admin.state.views;                // Registered views
admin.state.sidebar;              // Sidebar config
```

## Mounting the Admin UI

Pass the builder directly to `AdminLayoutProvider`:

```typescript
import { AdminLayoutProvider } from "@questpie/admin/client";

// Pass the builder directly - no need for Admin.from()
<AdminLayoutProvider admin={admin} client={cmsClient} ... />
```

## Type Inference

For global type inference, declare the type registry:

```typescript
declare module "@questpie/admin/client" {
  interface AdminTypeRegistry {
    cms: AppCMS;
    admin: typeof admin;
  }
}
```

This enables:
- Autocomplete for collection names
- Type-safe navigation helpers
- Inferred field types in hooks

## Collection Builder

Create collection UI configurations:

```typescript
const postsAdmin = builder
  .collection("posts")          // Collection name (must match backend)
  .meta({                       // UI metadata
    label: "Posts",
    icon: PostIcon,
  })
  .preview({...})               // Live preview config
  .fields(({ r }) => ({...}))   // Field configurations
  .list(({ v, f }) => {...})    // List view
  .form(({ v, f }) => {...});   // Form view
```

See [Collection Configuration](/docs/admin/collections) for details.

## Global Builder

Create global UI configurations:

```typescript
const settingsAdmin = builder
  .global("siteSettings")
  .meta({
    label: "Site Settings",
    icon: GearIcon,
  })
  .fields(({ r }) => ({...}))
  .form(({ v, f }) => {...});
```

See [Global Configuration](/docs/admin/globals) for details.

## Next Steps

<Cards>
  <Card href="/docs/admin/qa-from" title="Scoped Helpers" description="Using qa.from() for type-safe field access" />
  <Card href="/docs/admin/collections" title="Collections" description="Configure collection UI" />
  <Card href="/docs/admin/fields" title="Fields" description="All 22+ field types" />
</Cards>
