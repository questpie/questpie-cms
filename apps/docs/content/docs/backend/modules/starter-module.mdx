---
title: Starter Module
description: Built-in authentication and file upload module
---

# Starter Module

The starter module provides essential CMS functionality including authentication and file uploads. It's the recommended starting point for most projects.

## Installation

```typescript
import { q } from "questpie";
import { starterModule } from "questpie/server";

const cms = q({ name: "my-cms" })
  .use(starterModule)
  .collections({
    // Your collections
  })
  .build({
    db: { url: process.env.DATABASE_URL },
    storage: { /* storage config */ },
  });
```

## What's Included

### Collections

The starter module provides these collections:

#### `user`

User accounts for authentication.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Unique identifier |
| `name` | `string` | User's display name |
| `email` | `string` | Email address (unique) |
| `emailVerified` | `boolean` | Email verification status |
| `image` | `string?` | Avatar URL |
| `role` | `string?` | User role |
| `banned` | `boolean` | Ban status |
| `banReason` | `string?` | Reason for ban |
| `banExpires` | `Date?` | Ban expiration |
| `createdAt` | `Date` | Creation timestamp |
| `updatedAt` | `Date` | Last update timestamp |

#### `session`

Active user sessions.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Session ID |
| `userId` | `string` | Associated user ID |
| `token` | `string` | Session token (unique) |
| `expiresAt` | `Date` | Expiration time |
| `ipAddress` | `string?` | Client IP address |
| `userAgent` | `string?` | Client user agent |
| `impersonatedBy` | `string?` | Admin impersonating user |

#### `account`

OAuth/social login accounts linked to users.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Account ID |
| `userId` | `string` | Associated user ID |
| `accountId` | `string` | Provider's account ID |
| `providerId` | `string` | Provider name (google, github, etc.) |
| `accessToken` | `string?` | OAuth access token |
| `refreshToken` | `string?` | OAuth refresh token |
| `accessTokenExpiresAt` | `Date?` | Token expiration |
| `scope` | `string?` | OAuth scopes |

#### `verification`

Email verification and password reset tokens.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Token ID |
| `identifier` | `string` | Email or identifier |
| `value` | `string` | Verification token |
| `expiresAt` | `Date` | Token expiration |

#### `apikey`

API keys for programmatic access.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | API key ID |
| `name` | `string?` | Descriptive name |
| `key` | `string` | The API key (unique) |
| `userId` | `string` | Owner user ID |
| `enabled` | `boolean` | Whether key is active |
| `expiresAt` | `Date?` | Key expiration |
| `permissions` | `string?` | JSON permissions |
| `requestCount` | `number` | Total requests made |
| `remaining` | `number?` | Remaining requests (rate limit) |
| `createdAt` | `Date` | Creation timestamp |

#### `assets`

File uploads with storage integration.

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Asset ID |
| `key` | `string` | Storage key |
| `filename` | `string` | Original filename |
| `mimeType` | `string` | MIME type |
| `size` | `number` | File size in bytes |
| `visibility` | `string` | "public" or "private" |
| `width` | `number?` | Image width (if image) |
| `height` | `number?` | Image height (if image) |
| `alt` | `string?` | Alt text |
| `caption` | `string?` | Caption |
| `url` | `string` | Generated URL (computed) |
| `createdAt` | `Date` | Creation timestamp |
| `updatedAt` | `Date` | Last update timestamp |

### Authentication

The starter module configures Better Auth with:

- Email/password authentication
- Session management
- Email verification support
- API key authentication
- OAuth provider support (configure separately)

### Backend Messages

Default i18n messages for:

- Error messages (`error.notFound`, `error.unauthorized`, etc.)
- Validation messages
- System messages

## File Uploads

The assets collection has upload enabled:

```typescript
// Server-side upload
const asset = await cms.api.collections.assets.upload(file, ctx);
console.log(asset.url);  // Generated URL

// HTTP endpoints
// POST /cms/assets/upload - Upload a file
// GET /cms/assets/files/:key - Retrieve a file
```

### Storage Configuration

Configure storage in your build config:

```typescript
const cms = q({ name: "my-cms" })
  .use(starterModule)
  .build({
    db: { url: process.env.DATABASE_URL },
    storage: {
      default: "s3",
      disks: {
        local: {
          driver: "fs",
          root: "./uploads",
          urlBuilder: (key) => `/uploads/${key}`,
        },
        s3: {
          driver: "s3",
          bucket: "my-bucket",
          region: "us-east-1",
        },
      },
    },
  });
```

### Visibility

Assets can be public or private:

```typescript
// Public: direct URL
await cms.api.collections.assets.upload(file, ctx, {
  visibility: "public",
});
// asset.url = "https://cdn.example.com/abc123.jpg"

// Private: signed URL
await cms.api.collections.assets.upload(file, ctx, {
  visibility: "private",
});
// asset.url = "https://s3...?X-Amz-Signature=..."
```

## Extending Collections

Override starter module collections with additional fields:

```typescript
import { q, varchar } from "questpie";
import { starterModule } from "questpie/server";
import { collection } from "questpie";

const cms = q({ name: "my-cms" })
  .use(starterModule)
  .collections({
    // Extend users with additional fields
    user: collection("user")
      .fields({
        // Inherit existing fields via merge
        ...starterModule.collections.user.state.fields,
        // Add custom fields
        phone: varchar("phone", { length: 20 }),
        department: varchar("department", { length: 100 }),
      }),

    // Extend assets with folder organization
    assets: collection("assets")
      .fields({
        ...starterModule.collections.assets.state.fields,
        folder: varchar("folder", { length: 255 }),
        tags: varchar("tags", { length: 1000 }),
      })
      .upload({ visibility: "public" }),
  })
  .build({...});
```

## Auth Configuration

Add OAuth providers:

```typescript
const cms = q({ name: "my-cms" })
  .use(starterModule)
  .auth({
    // Add to starter module's auth config
    socialProviders: {
      google: {
        clientId: process.env.GOOGLE_CLIENT_ID!,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
      },
      github: {
        clientId: process.env.GITHUB_CLIENT_ID!,
        clientSecret: process.env.GITHUB_CLIENT_SECRET!,
      },
    },
    // Custom session settings
    session: {
      expiresIn: 60 * 60 * 24 * 30, // 30 days
    },
  })
  .build({...});
```

## Without Starter Module

If you need more control, you can build your own auth setup:

```typescript
import { q, varchar, boolean, timestamp } from "questpie";

// Define only what you need
const users = q.collection("users")
  .fields({
    email: varchar("email", { length: 255 }).notNull().unique(),
    passwordHash: varchar("passwordHash", { length: 255 }),
    role: varchar("role", { length: 50 }).default("user"),
  })
  .options({ timestamps: true });

const cms = q({ name: "my-cms" })
  .collections({ users })
  .auth({
    // Custom auth configuration
    emailAndPassword: { enabled: true },
    secret: process.env.AUTH_SECRET!,
  })
  .build({...});
```

## Related

- [Custom Modules](/docs/backend/modules/custom-modules) - Create your own modules
- [Authentication](/docs/guides/authentication) - Auth setup guide
- [Storage](/docs/guides/storage-upload) - File storage setup
